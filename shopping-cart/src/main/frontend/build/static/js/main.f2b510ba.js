(()=>{"use strict";var e,t={249:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(601),r=n.n(a),o=n(314),l=n.n(o)()(r());l.push([e.id,'/* React商品列表组件样式 */\n\n/* 商品卡片样式 */\n.product-card {\n  transition: all 0.3s ease;\n  border: 1px solid #e0e0e0;\n}\n\n.product-card:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  border-color: #007bff;\n}\n\n.product-image {\n  transition: transform 0.3s ease;\n}\n\n.product-card:hover .product-image {\n  transform: scale(1.05);\n}\n\n/* 加载动画 */\n.spinner-border {\n  width: 3rem;\n  height: 3rem;\n}\n\n/* 分页样式 */\n.pagination .page-link {\n  color: #007bff;\n  border-color: #dee2e6;\n}\n\n.pagination .page-item.active .page-link {\n  background-color: #007bff;\n  border-color: #007bff;\n}\n\n.pagination .page-link:hover {\n  color: #0056b3;\n  background-color: #e9ecef;\n  border-color: #dee2e6;\n}\n\n/* Toast容器样式 */\n.toast-container {\n  z-index: 9999;\n}\n\n/* 筛选卡片样式 */\n.card {\n  border: 1px solid #e0e0e0;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n/* 导航栏样式 */\n.navbar {\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n/* 响应式调整 */\n@media (max-width: 768px) {\n  .product-card {\n    margin-bottom: 1rem;\n  }\n  \n  .container-fluid {\n    padding-left: 15px;\n    padding-right: 15px;\n  }\n  \n  .card-body .row {\n    margin: 0;\n  }\n  \n  .card-body .col-md-2,\n  .card-body .col-md-4 {\n    padding: 0.25rem;\n  }\n}\n\n/* 商品图片占位符 */\n.product-image[src*="placeholder"] {\n  background-color: #f8f9fa;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.product-image[src*="placeholder"]::before {\n  content: "📦";\n  font-size: 3rem;\n  color: #6c757d;\n}\n\n/* 徽章样式 */\n.badge {\n  font-size: 0.75rem;\n}\n\n/* 按钮样式 */\n.btn-primary {\n  background-color: #007bff;\n  border-color: #007bff;\n  transition: all 0.2s ease;\n}\n\n.btn-primary:hover {\n  background-color: #0056b3;\n  border-color: #004085;\n  transform: translateY(-1px);\n}\n\n.btn-primary:disabled {\n  background-color: #6c757d;\n  border-color: #6c757d;\n  transform: none;\n}\n\n/* 星级评分样式 */\n.bi-star-fill,\n.bi-star-half {\n  color: #ffc107 !important;\n}\n\n.bi-star {\n  color: #dee2e6 !important;\n}\n\n/* 搜索框样式 */\n.input-group-text {\n  background-color: #f8f9fa;\n  border-color: #ced4da;\n}\n\n/* 选择框样式 */\n.form-select {\n  border-color: #ced4da;\n}\n\n.form-select:focus {\n  border-color: #007bff;\n  box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n}\n\n/* 空状态样式 */\n.display-1 {\n  font-size: 4rem;\n  opacity: 0.5;\n}\n\n/* 动画效果 */\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.product-card {\n  animation: fadeIn 0.5s ease-out;\n}\n\n/* 加载状态样式 */\n.loading-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n}\n\n/* 错误状态样式 */\n.alert {\n  border: none;\n  border-radius: 0.5rem;\n}\n\n.alert-danger {\n  background-color: #f8d7da;\n  color: #721c24;\n}\n\n/* 文本截断 */\n.text-truncate {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* 卡片内容布局 */\n.card-body {\n  padding: 1rem;\n}\n\n.card-title {\n  font-size: 1rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n\n.card-text {\n  font-size: 0.875rem;\n  line-height: 1.4;\n  margin-bottom: 0.75rem;\n}\n\n/* 价格显示 */\n.h6.text-primary {\n  font-weight: 700;\n  font-size: 1.1rem;\n}',""]);const c=l},935:(e,t,n)=>{var a=n(540),r=n(338);const o=n(83).A.create({baseURL:"/api",timeout:1e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>e,e=>Promise.reject(e)),o.interceptors.response.use(e=>e.data,e=>{var t;const n=(null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)||e.message||"请求失败";return console.error("API Error:",n),Promise.reject(new Error(n))});const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const n=Math.floor(e),a=e%1>=.5,r=t-n-(a?1:0);let o="";for(let e=0;e<n;e++)o+='<i class="bi bi-star-fill text-warning"></i>';a&&(o+='<i class="bi bi-star-half text-warning"></i>');for(let e=0;e<r;e++)o+='<i class="bi bi-star text-muted"></i>';return o},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const n=Date.now().toString(36)+Math.random().toString(36).substr(2),a='\n    <div id="'.concat(n,'" class="toast align-items-center text-white bg-').concat("error"===t?"danger":"success"===t?"success":"primary",' border-0" role="alert" aria-live="assertive" aria-atomic="true">\n      <div class="d-flex">\n        <div class="toast-body">\n          ').concat(e,'\n        </div>\n        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>\n      </div>\n    </div>\n  ');let r=document.getElementById("toast-container");r||(r=document.createElement("div"),r.id="toast-container",r.className="toast-container position-fixed top-0 end-0 p-3",r.style.zIndex="9999",document.body.appendChild(r)),r.insertAdjacentHTML("beforeend",a);const o=document.getElementById(n);new window.bootstrap.Toast(o,{autohide:!0,delay:3e3}).show(),o.addEventListener("hidden.bs.toast",()=>{o.remove()})};function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(!0),[s,m]=(0,a.useState)(null),[d,u]=(0,a.useState)({currentPage:0,totalPages:0,totalElements:0,size:12,hasNext:!1,hasPrevious:!1}),[p,b]=(0,a.useState)({query:"",category:"",brand:"",sortBy:"name",sortDir:"asc"}),[g,f]=(0,a.useState)([]),[v,E]=(0,a.useState)([]),[y,h]=(0,a.useState)(0),N=(0,a.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{r(!0),m(null);const n=i(i({},p),{},{page:e,size:d.size}),a=await function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.get("/products",{params:e})}(n);if(!a.success)throw new Error(a.message||"加载商品失败");t(a.data),u(a.pagination)}catch(e){m(e.message),c(e.message,"error")}finally{r(!1)}},[p,d.size]),x=(0,a.useCallback)(async()=>{try{const[e,t]=await Promise.all([o.get("/products/categories"),o.get("/products/brands")]);e.success&&f(e.data),t.success&&E(t.data)}catch(e){console.error("加载筛选选项失败:",e)}},[]),w=(0,a.useCallback)(async()=>{try{const e=await o.get("/cart/count");e.success&&h(e.data.count)}catch(e){console.error("加载购物车数量失败:",e)}},[]),k=(0,a.useCallback)((()=>{let e;return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];clearTimeout(e),e=setTimeout(()=>{clearTimeout(e),(e=>{b(t=>i(i({},t),{},{query:e}))})(...n)},500)}})(),[]),P=(e,t)=>{b(n=>i(i({},n),{},{[e]:t}))},j=e=>{e>=0&&e<d.totalPages&&N(e)};return(0,a.useEffect)(()=>{x(),w()},[x,w]),(0,a.useEffect)(()=>{N(0)},[N]),a.createElement("div",{className:"container-fluid py-4"},a.createElement("div",{className:"row mb-4"},a.createElement("div",{className:"col-12"},a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light rounded"},a.createElement("div",{className:"container-fluid"},a.createElement("span",{className:"navbar-brand mb-0 h1"},a.createElement("i",{className:"bi bi-shop me-2"}),"SpringCA 商品列表"),a.createElement("div",{className:"d-flex align-items-center"},a.createElement("span",{className:"badge bg-primary me-3"},a.createElement("i",{className:"bi bi-cart me-1"}),"购物车 (",y,")")))))),a.createElement("div",{className:"row mb-4"},a.createElement("div",{className:"col-12"},a.createElement("div",{className:"card"},a.createElement("div",{className:"card-body"},a.createElement("div",{className:"row g-3"},a.createElement("div",{className:"col-md-4"},a.createElement("div",{className:"input-group"},a.createElement("span",{className:"input-group-text"},a.createElement("i",{className:"bi bi-search"})),a.createElement("input",{type:"text",className:"form-control",placeholder:"搜索商品...",onChange:e=>k(e.target.value)}))),a.createElement("div",{className:"col-md-2"},a.createElement("select",{className:"form-select",value:p.category,onChange:e=>P("category",e.target.value)},a.createElement("option",{value:""},"所有分类"),g.map(e=>a.createElement("option",{key:e,value:e},e)))),a.createElement("div",{className:"col-md-2"},a.createElement("select",{className:"form-select",value:p.brand,onChange:e=>P("brand",e.target.value)},a.createElement("option",{value:""},"所有品牌"),v.map(e=>a.createElement("option",{key:e,value:e},e)))),a.createElement("div",{className:"col-md-2"},a.createElement("select",{className:"form-select",value:"".concat(p.sortBy,"-").concat(p.sortDir),onChange:e=>{const[t,n]=e.target.value.split("-");P("sortBy",t),P("sortDir",n)}},a.createElement("option",{value:"name-asc"},"名称 A-Z"),a.createElement("option",{value:"name-desc"},"名称 Z-A"),a.createElement("option",{value:"price-asc"},"价格低到高"),a.createElement("option",{value:"price-desc"},"价格高到低"),a.createElement("option",{value:"rating-desc"},"评分高到低"))),a.createElement("div",{className:"col-md-2"},a.createElement("select",{className:"form-select",value:d.size,onChange:e=>u(t=>i(i({},t),{},{size:parseInt(e.target.value)}))},a.createElement("option",{value:12},"12个/页"),a.createElement("option",{value:24},"24个/页"),a.createElement("option",{value:48},"48个/页")))))))),a.createElement("div",{className:"row mb-4"},a.createElement("div",{className:"col-12"},n&&a.createElement("div",{className:"text-center py-5"},a.createElement("div",{className:"spinner-border text-primary",role:"status"},a.createElement("span",{className:"visually-hidden"},"加载中...")),a.createElement("p",{className:"mt-2"},"正在加载商品...")),s&&a.createElement("div",{className:"alert alert-danger",role:"alert"},a.createElement("i",{className:"bi bi-exclamation-triangle me-2"}),s),!n&&!s&&0===e.length&&a.createElement("div",{className:"text-center py-5"},a.createElement("i",{className:"bi bi-inbox display-1 text-muted"}),a.createElement("p",{className:"mt-3 text-muted"},"没有找到符合条件的商品")),!n&&!s&&e.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"d-flex justify-content-between align-items-center mb-3"},a.createElement("span",{className:"text-muted"},"共找到 ",d.totalElements," 个商品， 第 ",d.currentPage+1," 页，共 ",d.totalPages," 页")),a.createElement("div",{className:"row"},e.map(e=>{return a.createElement("div",{key:e.id,className:"col-md-6 col-lg-4 col-xl-3 mb-4"},a.createElement("div",{className:"card h-100 product-card"},a.createElement("div",{className:"position-relative"},a.createElement("img",{src:(r=e.imageUrl,r?r.startsWith("http")||r.startsWith("/")?r:"/".concat(r):"/images/placeholder.jpg"),className:"card-img-top product-image",alt:e.name,style:{height:"200px",objectFit:"cover"}}),e.stock<=5&&e.stock>0&&a.createElement("span",{className:"badge bg-warning position-absolute top-0 end-0 m-2"},"仅剩",e.stock,"件"),0===e.stock&&a.createElement("span",{className:"badge bg-danger position-absolute top-0 end-0 m-2"},"缺货")),a.createElement("div",{className:"card-body d-flex flex-column"},a.createElement("h6",{className:"card-title text-truncate",title:e.name},e.name),a.createElement("p",{className:"card-text text-muted small flex-grow-1"},e.description&&e.description.length>60?e.description.substring(0,60)+"...":e.description),a.createElement("div",{className:"mb-2"},a.createElement("div",{className:"d-flex align-items-center mb-1"},a.createElement("span",{className:"me-2",dangerouslySetInnerHTML:{__html:l(e.rating||0)}}),a.createElement("small",{className:"text-muted"},("number"!=typeof(n=e.rating||0)&&(n=parseFloat(n)||0),n.toFixed(1))," (",e.reviewCount||0,")")),a.createElement("div",{className:"d-flex justify-content-between align-items-center"},a.createElement("span",{className:"h6 text-primary mb-0"},("number"!=typeof(t=e.price)&&(t=parseFloat(t)||0),"¥".concat(t.toFixed(2)))),a.createElement("small",{className:"text-muted"},e.category))),a.createElement("div",{className:"mt-auto"},a.createElement("button",{className:"btn btn-primary btn-sm w-100",onClick:()=>(async(e,t)=>{try{const n=await function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return o.post("/cart/add",null,{params:{productId:e,quantity:t}})}(e,1);if(!n.success)throw new Error(n.message||"添加失败");c("".concat(t," 已添加到购物车"),"success"),h(n.data.totalQuantity)}catch(e){c(e.message,"error")}})(e.id,e.name),disabled:0===e.stock},0===e.stock?"缺货":"加入购物车")))));var t,n,r}))))),!n&&!s&&e.length>0&&a.createElement("div",{className:"row"},a.createElement("div",{className:"col-12"},(()=>{if(d.totalPages<=1)return null;const e=Math.max(0,d.currentPage-Math.floor(2.5)),t=Math.min(d.totalPages-1,e+5-1);return a.createElement("nav",{"aria-label":"商品分页"},a.createElement("ul",{className:"pagination justify-content-center"},a.createElement("li",{className:"page-item ".concat(d.hasPrevious?"":"disabled")},a.createElement("button",{className:"page-link",onClick:()=>j(d.currentPage-1),disabled:!d.hasPrevious},"上一页")),e>0&&a.createElement(a.Fragment,null,a.createElement("li",{className:"page-item"},a.createElement("button",{className:"page-link",onClick:()=>j(0)},"1")),e>1&&a.createElement("li",{className:"page-item disabled"},a.createElement("span",{className:"page-link"},"..."))),Array.from({length:t-e+1},(t,n)=>e+n).map(e=>a.createElement("li",{key:e,className:"page-item ".concat(e===d.currentPage?"active":"")},a.createElement("button",{className:"page-link",onClick:()=>j(e)},e+1))),t<d.totalPages-1&&a.createElement(a.Fragment,null,t<d.totalPages-2&&a.createElement("li",{className:"page-item disabled"},a.createElement("span",{className:"page-link"},"...")),a.createElement("li",{className:"page-item"},a.createElement("button",{className:"page-link",onClick:()=>j(d.totalPages-1)},d.totalPages))),a.createElement("li",{className:"page-item ".concat(d.hasNext?"":"disabled")},a.createElement("button",{className:"page-link",onClick:()=>j(d.currentPage+1),disabled:!d.hasNext},"下一页"))))})())))};var u=n(72),p=n.n(u),b=n(825),g=n.n(b),f=n(659),v=n.n(f),E=n(56),y=n.n(E),h=n(159),N=n.n(h),x=n(113),w=n.n(x),k=n(249),P={};P.styleTagTransform=w(),P.setAttributes=y(),P.insert=v().bind(null,"head"),P.domAPI=g(),P.insertStyleElement=N(),p()(k.A,P),k.A&&k.A.locals&&k.A.locals,r.createRoot(document.getElementById("root")).render(a.createElement(a.StrictMode,null,a.createElement(d,null)))}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={id:e,exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,n,r,o)=>{if(!n){var l=1/0;for(m=0;m<e.length;m++){n=e[m][0],r=e[m][1],o=e[m][2];for(var c=!0,s=0;s<n.length;s++)(!1&o||l>=o)&&Object.keys(a.O).every(e=>a.O[e](n[s]))?n.splice(s--,1):(c=!1,o<l&&(l=o));if(c){e.splice(m--,1);var i=r();void 0!==i&&(t=i)}}return t}o=o||0;for(var m=e.length;m>0&&e[m-1][2]>o;m--)e[m]=e[m-1];e[m]=[n,r,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,l=n[0],c=n[1],s=n[2],i=0;if(l.some(t=>0!==e[t])){for(r in c)a.o(c,r)&&(a.m[r]=c[r]);if(s)var m=s(a)}for(t&&t(n);i<l.length;i++)o=l[i],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(m)},n=self.webpackChunkspringca_frontend=self.webpackChunkspringca_frontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0;var r=a.O(void 0,[96],()=>a(935));r=a.O(r)})();